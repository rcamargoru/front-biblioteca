<h2>{{ isEdit ? 'Editar Préstamo' : 'Nuevo Préstamo' }}</h2>

<form #form="ngForm" (ngSubmit)="guardarPrestamo()" novalidate>

  <!-- Libro -->
  <div>
    <label for="libroId">Libro:</label>
    <select
      id="libroId"
      name="libroId"
      [(ngModel)]="prestamo.libroId"
      required
      #libroId="ngModel"
    >
      <option value="" disabled selected>Seleccione un libro</option>
      <option *ngFor="let libro of libros" [value]="libro.id">
        {{ libro.titulo }}
      </option>
    </select>
    <div *ngIf="libroId.invalid && libroId.touched">
      <small>Debe seleccionar un libro.</small>
    </div>
  </div>

  <!-- Cliente -->
  <div>
    <label for="clienteId">Cliente:</label>
    <select
      id="clienteId"
      name="clienteId"
      [(ngModel)]="prestamo.clienteId"
      required
      #clienteId="ngModel"
    >
      <option value="" disabled selected>Seleccione un cliente</option>
      <option *ngFor="let usuario of usuarios" [value]="usuario.id">
        {{ usuario.nombre }}
      </option>
    </select>
    <div *ngIf="clienteId.invalid && clienteId.touched">
      <small>Debe seleccionar un cliente.</small>
    </div>
  </div>

  <!-- Estado -->
  <div>
    <label for="estado">Estado:</label>
    <select
      id="estado"
      name="estado"
      [(ngModel)]="prestamo.estado"
      required
      #estado="ngModel"
    >
      <option value="" disabled selected>Seleccione un estado</option>
      <option value="En préstamo">En préstamo</option>
      <option value="En ampliación">En ampliación</option>
      <option value="Devuelto">Devuelto</option>
    </select>
    <div *ngIf="estado.invalid && estado.touched">
      <small>Debe seleccionar un estado.</small>
    </div>
  </div>

  <button type="submit" [disabled]="form.invalid">Guardar</button>
</form>
